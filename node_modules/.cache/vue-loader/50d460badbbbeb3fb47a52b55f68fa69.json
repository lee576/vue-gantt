{"remainingRequest":"D:\\Demo\\svg\\svg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Demo\\svg\\svg\\src\\components\\gantt\\draglayouter\\box.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Demo\\svg\\svg\\src\\components\\gantt\\draglayouter\\box.vue","mtime":1642751508326},{"path":"D:\\Demo\\svg\\svg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Demo\\svg\\svg\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Demo\\svg\\svg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Demo\\svg\\svg\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG1vdW50ZWQgKCkgew0KICAgIHRoaXMuc2V0RHJhZ0l0ZW1GbGV4KCkNCiAgICB0aGlzLmRyYWdDb250cm9sbGVyRGl2KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOWmguaenGRyYWdJdGVtIOayoeacieWumuS5ieWuveW6pu+8jOWImWZsZXg9MQ0KICAgIHNldERyYWdJdGVtRmxleCAoKSB7DQogICAgICBjb25zdCBkcmFnQm94ID0gdGhpcy4kcmVmcy5kcmFnQm94DQogICAgICBjb25zdCBjaGlsZHNMZW4gPSBkcmFnQm94LmNoaWxkcmVuLmxlbmd0aA0KDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkc0xlbjsgaSsrKSB7DQogICAgICAgIGNvbnN0IG5vZGUgPSBkcmFnQm94LmNoaWxkcmVuW2ldDQogICAgICAgIGlmICghbm9kZS5zdHlsZS53aWR0aCkgew0KICAgICAgICAgIC8vIOWmguaenOayoeacieWumuS5ieWuveW6pu+8jOWImWZsZXg9MQ0KICAgICAgICAgIG5vZGUuc3R5bGUuZmxleCA9IDENCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgZHJhZ0NvbnRyb2xsZXJEaXYgKCkgew0KICAgICAgY29uc3QgcmVzaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzaXplJykgLy8g5ouW5ou95p2hDQogICAgICAvLyDlvqrnjq/kuLrmr4/kuKrmi5bmi73mnaHmt7vliqDkuovku7YNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzaXplLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIC8vIOm8oOagh+aMieS4i+S6i+S7tg0KICAgICAgICByZXNpemVbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bikNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uTW91c2VEb3duIChlKSB7DQogICAgICB0aGlzLnJlc2l6ZUJveCA9IGUudGFyZ2V0DQogICAgICB0aGlzLmN1cnJlbnRCb3ggPSB0aGlzLnJlc2l6ZUJveC5wYXJlbnROb2RlLy8g5b2T5YmN55uS5a2QDQogICAgICB0aGlzLnJpZ2h0Qm94ID0gdGhpcy5nZXROZXh0RWxlbWVudCh0aGlzLmN1cnJlbnRCb3gpLy8g5b2T5YmN55uS5a2Q55qE5LiL5Liq5YWE5byf6IqC54K5DQogICAgICBpZiAoIXRoaXMucmlnaHRCb3gpIHJldHVybg0KICAgICAgdGhpcy5jdXJMZW4gPSB0aGlzLmN1cnJlbnRCb3guY2xpZW50V2lkdGgNCiAgICAgIHRoaXMub3RoZXJCb3hXaWR0aCA9IHRoaXMuJHJlZnMuZHJhZ0JveC5jbGllbnRXaWR0aCAtIHRoaXMuY3VycmVudEJveC5jbGllbnRXaWR0aCAtIHRoaXMucmlnaHRCb3guY2xpZW50V2lkdGggLy8g5YW25LuW55uS5a2Q55qE5a695bqmDQogICAgICAvLyDpopzoibLmlLnlj5jmj5DphpINCiAgICAgIHRoaXMucmVzaXplQm94LnN0eWxlLmJhY2tncm91bmQgPSAnIzgxODE4MScNCiAgICAgIHRoaXMuc3RhcnRYID0gZS5jbGllbnRYDQogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2Vtb3ZlKQ0KICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZXVwKQ0KICAgIH0sDQogICAgLy8g6I635Y+W5LiL5LiA5Liq5YWE5byf5YWD57Sg55qE5YW85a655Ye95pWwDQogICAgZ2V0TmV4dEVsZW1lbnQgKGVsZW1lbnQpIHsNCiAgICAgIGlmIChlbGVtZW50Lm5leHRFbGVtZW50U2libGluZykgew0KICAgICAgICByZXR1cm4gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZhciBuZXh0ID0gZWxlbWVudC5uZXh0U2libGluZy8vIOS4i+S4gOS4quWFhOW8n+iKgueCuQ0KICAgICAgICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlICE9PSAxKSB7IC8vIOaciSDlubbkuJQg5LiN5piv5oiR5oOz6KaB55qEDQogICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmcNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV4dA0KICAgICAgfQ0KICAgIH0sDQogICAgb25Nb3VzZW1vdmUgKGUpIHsNCiAgICAgIGNvbnN0IGVuZFggPSBlLmNsaWVudFgNCiAgICAgIGNvbnN0IG1vdmVMZW4gPSBlbmRYIC0gdGhpcy5zdGFydFggLy8g77yIZW5keC1zdGFydHjvvIk9IOenu+WKqOeahOi3neemuw0KICAgICAgY29uc3QgQ3VyQm94TGVuID0gdGhpcy5jdXJMZW4gKyBtb3ZlTGVuIC8vIHJlc2l6ZVtpXS5sZWZ0K+enu+WKqOeahOi3neemuz3lt6bovrnljLrln5/mnIDlkI7nmoTlrr3luqYNCiAgICAgIGNvbnN0IHJpZ2h0Qm94TGVuID0gdGhpcy4kcmVmcy5kcmFnQm94LmNsaWVudFdpZHRoIC0gQ3VyQm94TGVuIC0gdGhpcy5vdGhlckJveFdpZHRoIC8vIOWPs+S+p+WuveW6pj3mgLvlrr3luqYt5bem5L6n5a695bqmLeWFtuWug+ebkuWtkOWuveW6pg0KICAgICAgLy8g5b2T5pyA5bCP5a695bqm5pe277yM5peg5rOV57un57ut5ouW5YqoDQogICAgICBpZiAoQ3VyQm94TGVuIDw9IDIwMCB8fCByaWdodEJveExlbiA8PSAyMDApIHJldHVybg0KICAgICAgdGhpcy5jdXJyZW50Qm94LnN0eWxlLndpZHRoID0gQ3VyQm94TGVuICsgJ3B4Jy8vIOW9k+WJjeebkuWtkOeahOWuveW6pg0KICAgICAgdGhpcy5yZXNpemVCb3guc3R5bGUubGVmdCA9IEN1ckJveExlbiAvLyDorr7nva7lt6bkvqfljLrln5/nmoTlrr3luqYNCiAgICAgIHRoaXMucmlnaHRCb3guc3R5bGUud2lkdGggPSByaWdodEJveExlbiArICdweCcNCiAgICB9LA0KICAgIG9uTW91c2V1cCAoKSB7DQogICAgICAvLyDpopzoibLmgaLlpI0NCiAgICAgIHRoaXMucmVzaXplQm94LnN0eWxlLmJhY2tncm91bmQgPSAnI2Q2ZDZkNicNCiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pDQogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2Vtb3ZlKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["box.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"box.vue","sourceRoot":"src/components/gantt/draglayouter","sourcesContent":["<template>\r\n  <div ref='dragBox' style='display: flex; width: 100%;height:100%'>\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n<script type=\"text/ecmascript-6\">\r\nexport default {\r\n  mounted () {\r\n    this.setDragItemFlex()\r\n    this.dragControllerDiv()\r\n  },\r\n  methods: {\r\n    // 如果dragItem 没有定义宽度，则flex=1\r\n    setDragItemFlex () {\r\n      const dragBox = this.$refs.dragBox\r\n      const childsLen = dragBox.children.length\r\n\r\n      for (let i = 0; i < childsLen; i++) {\r\n        const node = dragBox.children[i]\r\n        if (!node.style.width) {\r\n          // 如果没有定义宽度，则flex=1\r\n          node.style.flex = 1\r\n        }\r\n      }\r\n    },\r\n    dragControllerDiv () {\r\n      const resize = document.getElementsByClassName('resize') // 拖拽条\r\n      // 循环为每个拖拽条添加事件\r\n      for (let i = 0; i < resize.length; i++) {\r\n        // 鼠标按下事件\r\n        resize[i].addEventListener('mousedown', this.onMouseDown)\r\n      }\r\n    },\r\n    onMouseDown (e) {\r\n      this.resizeBox = e.target\r\n      this.currentBox = this.resizeBox.parentNode// 当前盒子\r\n      this.rightBox = this.getNextElement(this.currentBox)// 当前盒子的下个兄弟节点\r\n      if (!this.rightBox) return\r\n      this.curLen = this.currentBox.clientWidth\r\n      this.otherBoxWidth = this.$refs.dragBox.clientWidth - this.currentBox.clientWidth - this.rightBox.clientWidth // 其他盒子的宽度\r\n      // 颜色改变提醒\r\n      this.resizeBox.style.background = '#818181'\r\n      this.startX = e.clientX\r\n      document.addEventListener('mousemove', this.onMousemove)\r\n      document.addEventListener('mouseup', this.onMouseup)\r\n    },\r\n    // 获取下一个兄弟元素的兼容函数\r\n    getNextElement (element) {\r\n      if (element.nextElementSibling) {\r\n        return element.nextElementSibling\r\n      } else {\r\n        var next = element.nextSibling// 下一个兄弟节点\r\n        while (next && next.nodeType !== 1) { // 有 并且 不是我想要的\r\n          next = next.nextSibling\r\n        }\r\n        return next\r\n      }\r\n    },\r\n    onMousemove (e) {\r\n      const endX = e.clientX\r\n      const moveLen = endX - this.startX // （endx-startx）= 移动的距离\r\n      const CurBoxLen = this.curLen + moveLen // resize[i].left+移动的距离=左边区域最后的宽度\r\n      const rightBoxLen = this.$refs.dragBox.clientWidth - CurBoxLen - this.otherBoxWidth // 右侧宽度=总宽度-左侧宽度-其它盒子宽度\r\n      // 当最小宽度时，无法继续拖动\r\n      if (CurBoxLen <= 200 || rightBoxLen <= 200) return\r\n      this.currentBox.style.width = CurBoxLen + 'px'// 当前盒子的宽度\r\n      this.resizeBox.style.left = CurBoxLen // 设置左侧区域的宽度\r\n      this.rightBox.style.width = rightBoxLen + 'px'\r\n    },\r\n    onMouseup () {\r\n      // 颜色恢复\r\n      this.resizeBox.style.background = '#d6d6d6'\r\n      document.removeEventListener('mousedown', this.onMouseDown)\r\n      document.removeEventListener('mousemove', this.onMousemove)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}