{"remainingRequest":"D:\\MyCode\\vue-gantt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyCode\\vue-gantt\\src\\components\\gantt\\virtual-ruler.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyCode\\vue-gantt\\src\\components\\gantt\\virtual-ruler.vue","mtime":1649753719058},{"path":"D:\\MyCode\\vue-gantt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649728994235},{"path":"D:\\MyCode\\vue-gantt\\node_modules\\babel-loader\\lib\\index.js","mtime":1649728994097},{"path":"D:\\MyCode\\vue-gantt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649728994235},{"path":"D:\\MyCode\\vue-gantt\\node_modules\\vue-loader\\lib\\index.js","mtime":1649729006096}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpsZXQgaWQgPSAwOw0KZnVuY3Rpb24gZ2V0TmV4dElkICgpIHsNCiAgICBpZCArPSAxOw0KICAgIHJldHVybiBTdHJpbmcoaWQpOw0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdWaXJ0dWFsUnVsZXInLA0KICAgIHByb3BzOiB7DQogICAgICAgIC8vIOm7mOiupOWAvA0KICAgICAgICBkZWZhdWx0VmFsdWU6IE51bWJlciwNCiAgICAgICAgLy8g5pyA5bCP5Yi75bqm5YC8DQogICAgICAgIG1pbjogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDogMA0KICAgICAgICB9LA0KICAgICAgICAvLyDmnIDlpKfliLvluqblgLwNCiAgICAgICAgbWF4OiB7DQogICAgICAgICAgICB0eXBlOiBOdW1iZXIsDQogICAgICAgICAgICBkZWZhdWx0OiAxMDANCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yi75bqm6Ze06ZqUDQogICAgICAgIGdhcDogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yi75bqm57q/5a695bqmDQogICAgICAgIGl0ZW1XaWR0aDogew0KICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwNCiAgICAgICAgICAgIGRlZmF1bHQ6IDENCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yi75bqm57q/6aKc6ImyDQogICAgICAgIGl0ZW1Db2xvcjogew0KICAgICAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICAgICAgZGVmYXVsdDogJyNjY2NjY2MnDQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6pue6v+mrmOW6puWHveaVsOm7mOiupOS4uiA4LzE1LzIwDQogICAgICAgIGl0ZW1IZWlnaHQ6IHsNCiAgICAgICAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgICAgICAgZGVmYXVsdDogKGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgMTAgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSA1ID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAxNTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIDg7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6pue6v+acgOmrmOmrmOW6piDpu5jorqTkuLogaXRlbUhlaWdodCDnmoTmnIDpq5jpq5jluqYNCiAgICAgICAgaXRlbU1heEhlaWdodDogew0KICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwNCiAgICAgICAgICAgIGRlZmF1bHQgKCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFsbCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMubWF4ICsgMSAtIHRoaXMubWluIH0pLm1hcCgoXywgaW5kZXgpID0+IHRoaXMuaXRlbUhlaWdodChpbmRleCkpOw0KICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCguLi5hbGwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyDliLvluqbmoIfnur/lrr3luqYNCiAgICAgICAgcG9pbnRXaWR0aDogew0KICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwNCiAgICAgICAgICAgIGRlZmF1bHQ6IDENCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yi75bqm5qCH57q/6aKc6ImyDQogICAgICAgIHBvaW50Q29sb3I6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICcjMDBDNUNEJw0KICAgICAgICB9LA0KICAgICAgICAvLyDliLvluqbmoIfnur/moLflvI8NCiAgICAgICAgcG9pbnRTdHlsZTogT2JqZWN0LA0KICAgICAgICAvLyDliLvluqblgLxsYWJlbOmXtOmalA0KICAgICAgICBsYWJlbEdhcDogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDogMTANCiAgICAgICAgfSwNCiAgICAgICAgLy8g5piv5ZCm5pi+56S65Yi75bqm5YC8bGFiZWwNCiAgICAgICAgc2hvd0xhYmVsOiB7DQogICAgICAgICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICAvLyDliLvluqblgLznmoTlgI3mlbDvvIzkvovlpoLliLvluqblgLzkuLogMTAw77yM6Ze06ZqU5Li6MC4x5YiZ5YC85Li6MTAwICogMC4xLOm7mOiupOS4ujENCiAgICAgICAgdmFsdWVHYXA6IHsNCiAgICAgICAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgICAgICAgIGRlZmF1bHQ6IDENCiAgICAgICAgfSwNCiAgICAgICAgLy8g57yT5Yay5pWw6YeP77yM6aKE5YWI5riy5p+TDQogICAgICAgIGJ1ZmZlcjogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDogMTANCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Yi75bqm5bC66auY5bqmDQogICAgICAgIGhlaWdodDogew0KICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6puWwuuS4iui+ueahhg0KICAgICAgICB0b3BCb3JkZXI6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICAvLyDliLvluqblsLrkuIrovrnmoYblrr3luqYNCiAgICAgICAgdG9wQm9yZGVyV2lkdGg6IHsNCiAgICAgICAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sDQogICAgICAgICAgICBkZWZhdWx0OiAxDQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6puWwuuS4iui+ueahhuminOiJsg0KICAgICAgICB0b3BCb3JkZXJDb2xvcjogew0KICAgICAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICAgICAgZGVmYXVsdDogJyNjY2NjY2MnDQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6puWwuuiDjOaZr+a4kOWPmA0KICAgICAgICBsaW5lYXJHcmFkaWVudDogQm9vbGVhbiwNCiAgICAgICAgLy8g5Yi75bqm5bC66IOM5pmv5riQ5Y+Y5pa55ZCRDQogICAgICAgIGxpbmVhckdyYWRpZW50RGlyZWN0aW9uVmFyOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFsNCiAgICAgICAgICAgICAgICAndG8nLCAncmlnaHQnDQogICAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgIC8vIOWIu+W6puWwuuiDjOaZr+a4kOWPmOminOiJsg0KICAgICAgICBsaW5lYXJHcmFkaWVudENvbG9yVmFyOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFsNCiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDI1NSwgMjU1LCAxKScsDQogICAgICAgICAgICAgICAgJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMCkgMjUlJywNCiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDI1NSwgMjU1LCAwKSA4NSUnLA0KICAgICAgICAgICAgICAgICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpIDEwMCUnDQogICAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgIC8vIOaYr+WQpuiHquWKqOebkeWQrOWFg+e0oOWkp+Wwj+aUueWPmOS6i+S7tg0KICAgICAgICBhdXRvUmVzaXplOiBCb29sZWFuLA0KICAgICAgICAvLyDliLvluqblgLxsYWJlbOagt+W8jw0KICAgICAgICBsYWJlbFN0eWxlOiBPYmplY3QNCiAgICB9LA0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc3RhcnRJbmRleDogMCwNCiAgICAgICAgICAgIHNjcm9sbFRpbWVyOiBudWxsLA0KICAgICAgICAgICAgdmFsOiB0aGlzLmRlZmF1bHRWYWx1ZSB8fCB0aGlzLm1pbiwNCiAgICAgICAgICAgIGlzVG91Y2g6IGZhbHNlLA0KICAgICAgICAgICAgZmlyZVNjcm9sbEVuZDogbnVsbCwNCiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLA0KICAgICAgICAgICAgb2JzZXJ2ZXI6IG51bGwsDQogICAgICAgICAgICBpZDogZ2V0TmV4dElkKCksDQogICAgICAgICAgICBzdHlsZVNoZWV0OiB0aGlzLmdldFN0eWxlU2hlZXQoKQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLyoqDQogICAgICAgICAqIOS4gOWNiuWPr+inhuWuveW6pg0KICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfQ0KICAgICAgICAgKi8NCiAgICAgICAgaGFsZldpZHRoICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoIC8gMjsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIOaJgOacieWIu+W6puWwuuWIl+ihqA0KICAgICAgICAgKiBAcmV0dXJucyB7e2dhcFZhbHVlOiBudW1iZXIsIGluZGV4OiBudW1iZXIsIHZhbHVlOiBudW1iZXJ9W119DQogICAgICAgICAqLw0KICAgICAgICBsaXN0ICgpIHsNCiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aGlzLm1heCArIDEgLSB0aGlzLm1pbiB9KS5tYXAoKF8sIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRleCArIHRoaXMubWluOw0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlLA0KICAgICAgICAgICAgICAgICAgICBpbmRleCwNCiAgICAgICAgICAgICAgICAgICAgZ2FwVmFsdWU6IHRoaXMuZ2V0UmVhbFZhbHVlKHZhbHVlKQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVjaW1hbENvdW50ICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERlY2ltYWxDb3VudCh0aGlzLnZhbHVlR2FwKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIOWPr+inhuWIu+W6puWwuuaVsOmHjw0KICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfQ0KICAgICAgICAgKi8NCiAgICAgICAgdmlld0NvdW50ICgpIHsNCiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMud2lkdGggLyB0aGlzLmdhcCk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDlj6/op4bojIPlm7TlvIDlp4vliLvluqblsLrlgLznmoTkuIvmoIcNCiAgICAgICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgICAgICovDQogICAgICAgIHN0YXJ0ICgpIHsNCiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHRoaXMuc3RhcnRJbmRleCAtIHRoaXMudmlld0NvdW50IC8gMiAtIHRoaXMuYnVmZmVyKSk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDlj6/op4bojIPlm7Tnu5PmnZ/liLvluqblsLrlgLznmoTkuIvmoIcNCiAgICAgICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgICAgICovDQogICAgICAgIGVuZCAoKSB7DQogICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odGhpcy5zdGFydCArIHRoaXMudmlld0NvdW50ICsgdGhpcy5idWZmZXIgKiAyLCB0aGlzLmxpc3QubGVuZ3RoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIOWPr+inhuiMg+WbtOeahOWIu+W6puWwuuWIl+ihqA0KICAgICAgICAgKiBAcmV0dXJucyB7e2dhcFZhbHVlOiBudW1iZXIsIGluZGV4OiBudW1iZXIsIHZhbHVlOiBudW1iZXJ9W119DQogICAgICAgICAqLw0KICAgICAgICBwb29sICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3Quc2xpY2UodGhpcy5zdGFydCwgdGhpcy5lbmQpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog5oC75Yi75bqm5bC655qE5YWD57Sg5aSn5bCPDQogICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9DQogICAgICAgICAqLw0KICAgICAgICBzaXplICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoICogdGhpcy5nYXAgKyB0aGlzLndpZHRoIC0gdGhpcy5nYXA7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDliLvluqblsLrmnIDlpKfpq5jluqYNCiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30NCiAgICAgICAgICovDQogICAgICAgIGl0ZW1ESVZIZWlnaHQgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHgodGhpcy5pdGVtTWF4SGVpZ2h0KTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIOavj+S4quWIu+W6puWwuuWuveW6pg0KICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgX2l0ZW1XaWR0aCAoKSB7DQogICAgICAgICAgICBjb25zdCB7IGl0ZW1XaWR0aCB9ID0gdGhpczsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFB4KGl0ZW1XaWR0aCk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDliLvluqblsLrmoIfnur/moLflvI8NCiAgICAgICAgICogQHJldHVybnMge3tib3JkZXJMZWZ0OiBzdHJpbmcsIGxlZnQ6IHN0cmluZywgaGVpZ2h0OiBzdHJpbmd9fQ0KICAgICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgX3BvaW50U3R5bGUgKCkgew0KICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFB4KHRoaXMucG9pbnRXaWR0aCk7DQogICAgICAgICAgICBjb25zdCBudW1iZXJXaWR0aCA9IHBhcnNlRmxvYXQodGhpcy5wb2ludFdpZHRoKTsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgYm9yZGVyTGVmdDogYCR7d2lkdGh9IHNvbGlkICR7dGhpcy5wb2ludENvbG9yfWAsDQogICAgICAgICAgICAgICAgbGVmdDogYGNhbGMoNTAlIC0gJHtudW1iZXJXaWR0aCAvIDIgLSAxfXB4KWAsDQogICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLml0ZW1ESVZIZWlnaHQsDQogICAgICAgICAgICAgICAgLi4uKHRoaXMucG9pbnRTdHlsZSB8fCB7fSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDliLvluqblsLrlrrnlmajmoLflvI8NCiAgICAgICAgICogQHJldHVybnMge3tib3JkZXJUb3A6IHN0cmluZywgaGVpZ2h0OiBzdHJpbmd9fQ0KICAgICAgICAgKi8NCiAgICAgICAgc3R5bGUgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0UHgodGhpcy5oZWlnaHQpLA0KICAgICAgICAgICAgICAgIGJvcmRlclRvcDogdGhpcy50b3BCb3JkZXIgPyBgJHt0aGlzLmdldFB4KHRoaXMudG9wQm9yZGVyV2lkdGgpfSBzb2xpZCAke3RoaXMudG9wQm9yZGVyQ29sb3J9YCA6ICdub25lJw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAgIC8qKg0KICAgICAgICAgKiDlrp7ml7blj5HpgIHlvZPliY3lgLzlj5jljJYNCiAgICAgICAgICogQHBhcmFtIHZhbHVlDQogICAgICAgICAqLw0KICAgICAgICB2YWwgKHZhbHVlKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmdldFJlYWxWYWx1ZSh2YWx1ZSkpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog6K6+572u6IOM5pmv5riQ5Y+YDQogICAgICAgICAqLw0KICAgICAgICBsaW5lYXJHcmFkaWVudCAoKSB7DQogICAgICAgICAgICB0aGlzLnNldEFmdGVyU3R5bGUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIOiuvue9ruiDjOaZr+a4kOWPmOaWueWQkQ0KICAgICAgICAgKi8NCiAgICAgICAgbGluZWFyR3JhZGllbnREaXJlY3Rpb25WYXIgKCkgew0KICAgICAgICAgICAgdGhpcy5zZXRBZnRlclN0eWxlKCk7DQogICAgICAgIH0sDQogICAgICAgIC8qKg0KICAgICAgICAgKiDorr7nva7og4zmma/muJDlj5jpopzoibINCiAgICAgICAgICovDQogICAgICAgIGxpbmVhckdyYWRpZW50Q29sb3JWYXIgKCkgew0KICAgICAgICAgICAgdGhpcy5zZXRBZnRlclN0eWxlKCk7DQogICAgICAgIH0sDQogICAgICAgIGF1dG9TaXplICgpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0QXV0b1Jlc2l6ZSgpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkICgpIHsNCiAgICAgICAgdGhpcy5zZXRBdXRvUmVzaXplKCk7DQogICAgICAgIHRoaXMucmVzaXplKCk7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbCkpOw0KICAgICAgICB0aGlzLnNldEFmdGVyU3R5bGUoKTsNCiAgICAgICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMudG91Y2hTdGFydC5iaW5kKHRoaXMpKTsNCiAgICAgICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLnRvdWNoRW5kLmJpbmQodGhpcykpOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBnZXRTdHlsZVNoZWV0ICgpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBjb25zdCBzaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzLml0ZW0oaSk7DQogICAgICAgICAgICAgICAgaWYgKCFzaGVldC5ocmVmKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGVldDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7DQogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0eWxlU2hlZXQoKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgc2V0QXV0b1Jlc2l6ZSAoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVzaXplKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudFJlc2l6ZURldGVjdG9yTWFrZXIgPSBhd2FpdCBpbXBvcnQoJ2VsZW1lbnQtcmVzaXplLWRldGVjdG9yJyk7DQogICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IGVsZW1lbnRSZXNpemVEZXRlY3Rvck1ha2VyLmRlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVyLnVuaW5zdGFsbCh0aGlzLiRlbCk7DQogICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5saXN0ZW5Ubyh0aGlzLiRlbCwgdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIudW5pbnN0YWxsKHRoaXMuJGVsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHJlc2l6ZSAoKSB7DQogICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy4kcmVmcy5zY3JvbGwuY2xpZW50V2lkdGg7DQogICAgICAgIH0sDQogICAgICAgIHRvdWNoU3RhcnQgKCkgew0KICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgdG91Y2hFbmQgKCkgew0KICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7DQogICAgICAgICAgICBpZiAodGhpcy5maXJlU2Nyb2xsRW5kKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmZpcmVTY3JvbGxFbmQ7DQogICAgICAgICAgICAgICAgdGhpcy5maXJlU2Nyb2xsRW5kID0gbnVsbDsNCiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVuZChldmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGdldFJlYWxWYWx1ZSAodmFsdWUpIHsNCiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoKHZhbHVlICogdGhpcy52YWx1ZUdhcCkudG9GaXhlZCh0aGlzLmRlY2ltYWxDb3VudCkpOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog6I635Y+W5YOP57Sg5qC35byPDQogICAgICAgICAqIEBwYXJhbSB2YWx1ZQ0KICAgICAgICAgKiBAcGFyYW0gdW5pdA0KICAgICAgICAgKiBAcmV0dXJucyB7Kn0NCiAgICAgICAgICovDQogICAgICAgIGdldFB4KHZhbHVlLCB1bml0ID0gJ3B4Jykgew0KICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBgJHt2YWx1ZX0ke3VuaXR9YCA6IHZhbHVlOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog6I635Y+W5Yi75bqm57q/5qC35byPDQogICAgICAgICAqIEBwYXJhbSBpbmRleA0KICAgICAgICAgKiBAcmV0dXJucyB7e318e2JvcmRlckxlZnQ6IHN0cmluZywgaGVpZ2h0OiAqfX0NCiAgICAgICAgICovDQogICAgICAgIGdldEl0ZW1TdHlsZSAoaW5kZXgpIHsNCiAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4ge307DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCB7IGl0ZW1Db2xvciwgaXRlbUhlaWdodCB9ID0gdGhpczsNCiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0UHgoaXRlbUhlaWdodChpbmRleCkpOw0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBib3JkZXJMZWZ0OiBgJHt0aGlzLl9pdGVtV2lkdGh9IHNvbGlkICR7aXRlbUNvbG9yfWAsDQogICAgICAgICAgICAgICAgaGVpZ2h0DQogICAgICAgICAgICB9Ow0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog5Yi75bqm5YC8bGFiZWzmmK/lkKbmmL7npLoNCiAgICAgICAgICogQHBhcmFtIGluZGV4DQogICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufGJvb2xlYW59DQogICAgICAgICAqLw0KICAgICAgICBsYWJlbFNob3cgKGluZGV4KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93TGFiZWwgJiYgKGluZGV4ICUgdGhpcy5sYWJlbEdhcCA9PT0gMCk7DQogICAgICAgIH0sDQogICAgICAgIHNldEFmdGVyU3R5bGUgKCkgew0KICAgICAgICAgICAgbGV0IHN0eWxlOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmxpbmVhckdyYWRpZW50KSB7DQogICAgICAgICAgICAgICAgc3R5bGUgPSAnY29udGVudDogbm9uZSc7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMubGluZWFyR3JhZGllbnREaXJlY3Rpb25WYXIuam9pbignICcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5saW5lYXJHcmFkaWVudENvbG9yVmFyLmpvaW4oJywnKTsNCiAgICAgICAgICAgICAgICBzdHlsZSA9IGBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoJHtkaXJlY3Rpb259LCAke2NvbG9yfSk7IGNvbnRlbnQ6ICIiYDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gYC52aXJ0dWFsLXJ1bGVyW2RhdGEtdnItaWQ9IiR7dGhpcy5pZH0iXTo6YWZ0ZXJgOw0KICAgICAgICAgICAgdGhpcy5kZWxldGVBZnRlckNTU1J1bGUoc2VsZWN0b3IpOw0KICAgICAgICAgICAgdGhpcy5zdHlsZVNoZWV0LmFkZFJ1bGUoc2VsZWN0b3IsIHN0eWxlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlQWZ0ZXJDU1NSdWxlIChzZWxlY3Rvcikgew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0eWxlU2hlZXQucnVsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHlsZVNoZWV0LnJ1bGVzLml0ZW0oaSkuc2VsZWN0b3JUZXh0ID09PSBzZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXQuZGVsZXRlUnVsZShpKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0RGVjaW1hbENvdW50IChudW0pIHsNCiAgICAgICAgICAgIGNvbnN0IHN0ciA9IFN0cmluZyhudW0pOw0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZignLicpOw0KICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHN0ci5sZW5ndGggLSAxIC0gaW5kZXgsIDApOw0KICAgICAgICB9LA0KICAgICAgICAvKioNCiAgICAgICAgICog6K6+572u5Yi75bqm5YC85bm25ruR5Yqo5Yi75bqm5bC65qCH57q/5Yiw6K+l5L2N572uDQogICAgICAgICAqIEBwYXJhbSB2YWx1ZQ0KICAgICAgICAgKi8NCiAgICAgICAgc2V0VmFsdWUgKHZhbHVlKSB7DQogICAgICAgICAgICBjb25zdCB7dmFsdWVHYXB9ID0gdGhpczsNCiAgICAgICAgICAgIGlmICh2YWx1ZUdhcCA+IDAgJiYgdmFsdWVHYXAgPCAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fc2V0VmFsdWUoTWF0aC5jZWlsKHZhbHVlIC8gdmFsdWVHYXApKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5fc2V0VmFsdWUodmFsdWUgLyB2YWx1ZUdhcCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIF9zZXRWYWx1ZSAodmFsdWUpIHsNCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5saXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlKTsNCiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsTGVmdCA9IGluZGV4ICogdGhpcy5nYXA7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNjcm9sbEVuZCAoKSB7DQogICAgICAgICAgICB0aGlzLl9zZXRWYWx1ZSh0aGlzLnZhbCk7DQogICAgICAgIH0sDQogICAgICAgIHNjcm9sbCAoZXZlbnQpIHsNCiAgICAgICAgICAgIGNvbnN0IHtzY3JvbGxMZWZ0fSA9IGV2ZW50LnRhcmdldDsNCiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0ID49IHRoaXMubGlzdC5sZW5ndGggKiB0aGlzLmdhcCkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFRpbWVyKTsNCiAgICAgICAgICAgIHRoaXMudmFsID0gTWF0aC5yb3VuZChzY3JvbGxMZWZ0IC8gdGhpcy5nYXAgKyB0aGlzLm1pbik7DQogICAgICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKHNjcm9sbExlZnQgLyB0aGlzLmdhcCk7DQogICAgICAgICAgICB0aGlzLnNjcm9sbFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUb3VjaCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVTY3JvbGxFbmQgPSBldmVudDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVuZChldmVudCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMjAwKTsNCiAgICAgICAgfQ0KICAgIH0NCn07DQo="},{"version":3,"sources":["virtual-ruler.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"virtual-ruler.vue","sourceRoot":"src/components/gantt","sourcesContent":["<template>\r\n    <div class=\"virtual-ruler\" :data-vr-id=\"id\">\r\n        <div ref=\"scroll\" class=\"virtual-ruler-scroll\" :style=\"style\" @scroll=\"scroll\">\r\n            <div class=\"virtual-ruler-body\" :style=\"{minWidth: getPx(size)}\">\r\n                <div class=\"virtual-ruler-body-item\" :style=\"{transform: 'translateX(0)'}\"/>\r\n                <div class=\"virtual-ruler-body-item\" :style=\"{transform: `translateX(${getPx(halfWidth)})`}\"/>\r\n                <div\r\n                    v-for=\"(item, index) of pool\"\r\n                    :key=\"index\"\r\n                    :style=\"{transform: `translateX(${item.index * gap + halfWidth}px)`}\"\r\n                    class=\"virtual-ruler-body-item\">\r\n                    <div class=\"virtual-ruler-body-item-wrapper\" :data-id=\"item.index\">\r\n                        <div class=\"ruler-wrapper\" :style=\"{height: itemDIVHeight}\">\r\n                            <div :style=\"getItemStyle(item.index)\"/>\r\n                        </div>\r\n                        <div v-if=\"labelShow(item.index)\" :style=\"labelStyle\" class=\"virtual-ruler-label\">\r\n                            <slot name=\"label\" :value=\"item.gapValue\" :index=\"item.index\">\r\n                                {{item.gapValue}}\r\n                            </slot>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"virtual-ruler-point\" :style=\"_pointStyle\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nlet id = 0;\r\nfunction getNextId () {\r\n    id += 1;\r\n    return String(id);\r\n}\r\nexport default {\r\n    name: 'VirtualRuler',\r\n    props: {\r\n        // 默认值\r\n        defaultValue: Number,\r\n        // 最小刻度值\r\n        min: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        // 最大刻度值\r\n        max: {\r\n            type: Number,\r\n            default: 100\r\n        },\r\n        // 刻度间隔\r\n        gap: {\r\n            type: Number,\r\n            required: true\r\n        },\r\n        // 刻度线宽度\r\n        itemWidth: {\r\n            type: [Number, String],\r\n            default: 1\r\n        },\r\n        // 刻度线颜色\r\n        itemColor: {\r\n            type: String,\r\n            default: '#cccccc'\r\n        },\r\n        // 刻度线高度函数默认为 8/15/20\r\n        itemHeight: {\r\n            type: Function,\r\n            default: (index) => {\r\n                if (index % 10 === 0) {\r\n                    return 20;\r\n                }\r\n                if (index % 5 === 0) {\r\n                    return 15;\r\n                }\r\n                return 8;\r\n            }\r\n        },\r\n        // 刻度线最高高度 默认为 itemHeight 的最高高度\r\n        itemMaxHeight: {\r\n            type: [Number, String],\r\n            default () {\r\n                const all = Array.from({ length: this.max + 1 - this.min }).map((_, index) => this.itemHeight(index));\r\n                return Math.max(...all);\r\n            }\r\n        },\r\n        // 刻度标线宽度\r\n        pointWidth: {\r\n            type: [Number, String],\r\n            default: 1\r\n        },\r\n        // 刻度标线颜色\r\n        pointColor: {\r\n            type: String,\r\n            default: '#00C5CD'\r\n        },\r\n        // 刻度标线样式\r\n        pointStyle: Object,\r\n        // 刻度值label间隔\r\n        labelGap: {\r\n            type: Number,\r\n            default: 10\r\n        },\r\n        // 是否显示刻度值label\r\n        showLabel: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        // 刻度值的倍数，例如刻度值为 100，间隔为0.1则值为100 * 0.1,默认为1\r\n        valueGap: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        // 缓冲数量，预先渲染\r\n        buffer: {\r\n            type: Number,\r\n            default: 10\r\n        },\r\n        // 刻度尺高度\r\n        height: {\r\n            type: [Number, String],\r\n            required: true\r\n        },\r\n        // 刻度尺上边框\r\n        topBorder: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        // 刻度尺上边框宽度\r\n        topBorderWidth: {\r\n            type: [Number, String],\r\n            default: 1\r\n        },\r\n        // 刻度尺上边框颜色\r\n        topBorderColor: {\r\n            type: String,\r\n            default: '#cccccc'\r\n        },\r\n        // 刻度尺背景渐变\r\n        linearGradient: Boolean,\r\n        // 刻度尺背景渐变方向\r\n        linearGradientDirectionVar: {\r\n            type: Array,\r\n            default: () => [\r\n                'to', 'right'\r\n            ]\r\n        },\r\n        // 刻度尺背景渐变颜色\r\n        linearGradientColorVar: {\r\n            type: Array,\r\n            default: () => [\r\n                'rgba(255, 255, 255, 1)',\r\n                'rgba(255, 255, 255, 0) 25%',\r\n                'rgba(255, 255, 255, 0) 85%',\r\n                'rgba(255, 255, 255, 1) 100%'\r\n            ]\r\n        },\r\n        // 是否自动监听元素大小改变事件\r\n        autoResize: Boolean,\r\n        // 刻度值label样式\r\n        labelStyle: Object\r\n    },\r\n    data () {\r\n        return {\r\n            startIndex: 0,\r\n            scrollTimer: null,\r\n            val: this.defaultValue || this.min,\r\n            isTouch: false,\r\n            fireScrollEnd: null,\r\n            width: document.body.clientWidth,\r\n            observer: null,\r\n            id: getNextId(),\r\n            styleSheet: this.getStyleSheet()\r\n        };\r\n    },\r\n    computed: {\r\n        /**\r\n         * 一半可视宽度\r\n         * @returns {number}\r\n         */\r\n        halfWidth () {\r\n            return this.width / 2;\r\n        },\r\n        /**\r\n         * 所有刻度尺列表\r\n         * @returns {{gapValue: number, index: number, value: number}[]}\r\n         */\r\n        list () {\r\n            return Array.from({ length: this.max + 1 - this.min }).map((_, index) => {\r\n                const value = index + this.min;\r\n                return {\r\n                    value,\r\n                    index,\r\n                    gapValue: this.getRealValue(value)\r\n                };\r\n            });\r\n        },\r\n        decimalCount () {\r\n            return this.getDecimalCount(this.valueGap);\r\n        },\r\n        /**\r\n         * 可视刻度尺数量\r\n         * @returns {number}\r\n         */\r\n        viewCount () {\r\n            return Math.round(this.width / this.gap);\r\n        },\r\n        /**\r\n         * 可视范围开始刻度尺值的下标\r\n         * @returns {number}\r\n         */\r\n        start () {\r\n            return Math.max(0, Math.floor(this.startIndex - this.viewCount / 2 - this.buffer));\r\n        },\r\n        /**\r\n         * 可视范围结束刻度尺值的下标\r\n         * @returns {number}\r\n         */\r\n        end () {\r\n            return Math.min(this.start + this.viewCount + this.buffer * 2, this.list.length);\r\n        },\r\n        /**\r\n         * 可视范围的刻度尺列表\r\n         * @returns {{gapValue: number, index: number, value: number}[]}\r\n         */\r\n        pool () {\r\n            return this.list.slice(this.start, this.end);\r\n        },\r\n        /**\r\n         * 总刻度尺的元素大小\r\n         * @returns {number}\r\n         */\r\n        size () {\r\n            return this.list.length * this.gap + this.width - this.gap;\r\n        },\r\n        /**\r\n         * 刻度尺最大高度\r\n         * @returns {string}\r\n         */\r\n        itemDIVHeight () {\r\n            return this.getPx(this.itemMaxHeight);\r\n        },\r\n        /**\r\n         * 每个刻度尺宽度\r\n         * @returns {string}\r\n         * @private\r\n         */\r\n        _itemWidth () {\r\n            const { itemWidth } = this;\r\n            return this.getPx(itemWidth);\r\n        },\r\n        /**\r\n         * 刻度尺标线样式\r\n         * @returns {{borderLeft: string, left: string, height: string}}\r\n         * @private\r\n         */\r\n        _pointStyle () {\r\n            const width = this.getPx(this.pointWidth);\r\n            const numberWidth = parseFloat(this.pointWidth);\r\n            return {\r\n                borderLeft: `${width} solid ${this.pointColor}`,\r\n                left: `calc(50% - ${numberWidth / 2 - 1}px)`,\r\n                height: this.itemDIVHeight,\r\n                ...(this.pointStyle || {})\r\n            };\r\n        },\r\n        /**\r\n         * 刻度尺容器样式\r\n         * @returns {{borderTop: string, height: string}}\r\n         */\r\n        style () {\r\n            return {\r\n                height: this.getPx(this.height),\r\n                borderTop: this.topBorder ? `${this.getPx(this.topBorderWidth)} solid ${this.topBorderColor}` : 'none'\r\n            };\r\n        },\r\n    },\r\n    watch: {\r\n        /**\r\n         * 实时发送当前值变化\r\n         * @param value\r\n         */\r\n        val (value) {\r\n            this.$emit('change', this.getRealValue(value));\r\n        },\r\n        /**\r\n         * 设置背景渐变\r\n         */\r\n        linearGradient () {\r\n            this.setAfterStyle();\r\n        },\r\n        /**\r\n         * 设置背景渐变方向\r\n         */\r\n        linearGradientDirectionVar () {\r\n            this.setAfterStyle();\r\n        },\r\n        /**\r\n         * 设置背景渐变颜色\r\n         */\r\n        linearGradientColorVar () {\r\n            this.setAfterStyle();\r\n        },\r\n        autoSize () {\r\n            this.setAutoResize();\r\n        }\r\n    },\r\n    mounted () {\r\n        this.setAutoResize();\r\n        this.resize();\r\n        setTimeout(() => this.setValue(this.val));\r\n        this.setAfterStyle();\r\n        this.$el.addEventListener('touchstart', this.touchStart.bind(this));\r\n        this.$el.addEventListener('touchend', this.touchEnd.bind(this));\r\n    },\r\n    methods: {\r\n        getStyleSheet () {\r\n            for (let i = 0; i < document.styleSheets.length; i++) {\r\n                const sheet = document.styleSheets.item(i);\r\n                if (!sheet.href) {\r\n                    return sheet;\r\n                }\r\n            }\r\n            const style = document.createElement('style');\r\n            document.head.appendChild(style);\r\n            return this.getStyleSheet();\r\n        },\r\n        async setAutoResize () {\r\n            if (this.autoResize) {\r\n                const elementResizeDetectorMaker = await import('element-resize-detector');\r\n                this.observer = elementResizeDetectorMaker.default();\r\n                this.observer.uninstall(this.$el);\r\n                this.observer.listenTo(this.$el, this.resize.bind(this));\r\n            } else {\r\n                if (this.observer) {\r\n                    this.observer.uninstall(this.$el);\r\n                }\r\n            }\r\n        },\r\n        resize () {\r\n            this.width = this.$refs.scroll.clientWidth;\r\n        },\r\n        touchStart () {\r\n            this.isTouch = true;\r\n        },\r\n        touchEnd () {\r\n            this.isTouch = false;\r\n            if (this.fireScrollEnd) {\r\n                const event = this.fireScrollEnd;\r\n                this.fireScrollEnd = null;\r\n                this.scrollEnd(event);\r\n            }\r\n        },\r\n        getRealValue (value) {\r\n            return Number((value * this.valueGap).toFixed(this.decimalCount));\r\n        },\r\n        /**\r\n         * 获取像素样式\r\n         * @param value\r\n         * @param unit\r\n         * @returns {*}\r\n         */\r\n        getPx(value, unit = 'px') {\r\n            return typeof value === 'number' ? `${value}${unit}` : value;\r\n        },\r\n        /**\r\n         * 获取刻度线样式\r\n         * @param index\r\n         * @returns {{}|{borderLeft: string, height: *}}\r\n         */\r\n        getItemStyle (index) {\r\n            if (index < 0) {\r\n                return {};\r\n            }\r\n            const { itemColor, itemHeight } = this;\r\n            const height = this.getPx(itemHeight(index));\r\n            return {\r\n                borderLeft: `${this._itemWidth} solid ${itemColor}`,\r\n                height\r\n            };\r\n        },\r\n        /**\r\n         * 刻度值label是否显示\r\n         * @param index\r\n         * @returns {boolean|boolean}\r\n         */\r\n        labelShow (index) {\r\n            return this.showLabel && (index % this.labelGap === 0);\r\n        },\r\n        setAfterStyle () {\r\n            let style;\r\n            if (!this.linearGradient) {\r\n                style = 'content: none';\r\n            } else {\r\n                const direction = this.linearGradientDirectionVar.join(' ');\r\n                const color = this.linearGradientColorVar.join(',');\r\n                style = `background: linear-gradient(${direction}, ${color}); content: \"\"`;\r\n            }\r\n            const selector = `.virtual-ruler[data-vr-id=\"${this.id}\"]::after`;\r\n            this.deleteAfterCSSRule(selector);\r\n            this.styleSheet.addRule(selector, style);\r\n        },\r\n        deleteAfterCSSRule (selector) {\r\n            for (let i = 0; i < this.styleSheet.rules.length; i++) {\r\n                if (this.styleSheet.rules.item(i).selectorText === selector) {\r\n                    this.styleSheet.deleteRule(i);\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n        getDecimalCount (num) {\r\n            const str = String(num);\r\n            const index = str.indexOf('.');\r\n            return Math.max(str.length - 1 - index, 0);\r\n        },\r\n        /**\r\n         * 设置刻度值并滑动刻度尺标线到该位置\r\n         * @param value\r\n         */\r\n        setValue (value) {\r\n            const {valueGap} = this;\r\n            if (valueGap > 0 && valueGap < 1) {\r\n                this._setValue(Math.ceil(value / valueGap));\r\n            } else {\r\n                this._setValue(value / valueGap);\r\n            }\r\n        },\r\n        _setValue (value) {\r\n            const index = this.list.findIndex(item => item.value === value);\r\n            if (index > -1) {\r\n                this.$refs.scroll.scrollLeft = index * this.gap;\r\n            }\r\n        },\r\n        scrollEnd () {\r\n            this._setValue(this.val);\r\n        },\r\n        scroll (event) {\r\n            const {scrollLeft} = event.target;\r\n            if (scrollLeft >= this.list.length * this.gap) {\r\n                return;\r\n            }\r\n            clearTimeout(this.scrollTimer);\r\n            this.val = Math.round(scrollLeft / this.gap + this.min);\r\n            this.startIndex = Math.floor(scrollLeft / this.gap);\r\n            this.scrollTimer = setTimeout(() => {\r\n                if (this.isTouch) {\r\n                    this.fireScrollEnd = event;\r\n                } else {\r\n                    this.scrollEnd(event);\r\n                }\r\n            }, 200);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .virtual-ruler {\r\n        position: relative;\r\n        width: 100%;\r\n        &::after {\r\n            content: \"\";\r\n            position: absolute;\r\n            z-index: 1;\r\n            top: 0;\r\n            right: 0;\r\n            pointer-events: none;\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n        .virtual-ruler-scroll {\r\n            overflow-x: auto;\r\n            position: relative;\r\n            &::-webkit-scrollbar {\r\n                display: none;\r\n            }\r\n        }\r\n        &-point {\r\n            position: absolute;\r\n            left: 50%;\r\n            top: 0;\r\n        }\r\n        &-body {\r\n            position: relative;\r\n            display: flex;\r\n            height: 100%;\r\n            &-item {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                will-change: transform;\r\n            }\r\n        }\r\n        &-label {\r\n            position: absolute;\r\n            text-align: center;\r\n            width: 50px;\r\n            left: -25px;\r\n            color: #cccccc;\r\n            font-size: 15px;\r\n        }\r\n    }\r\n</style>"]}]}